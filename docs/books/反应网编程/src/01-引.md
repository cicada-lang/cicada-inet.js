---
title: 引
---

2021 年末，我偶然看到一片 1990 年的论文 "Interaction Nets"，
作者是法国逻辑学家拉丰（Yves Lafont）。
其中介绍了一种很新奇的计算模型，
用节点和边组成的图作为数据，
用相邻节点之间的反应所引起的变化作为计算。

这类似化学反应，所以 "Interaction" 一词，我翻译为「反应」，
整个计算模型就称作「反应网」。

如何用图来编码数据呢？

假设我们要编码最简单的数据 -- 自然数，
我们可以模仿上古结绳计数，用节点来记录个数。

```
0  (zero)--
1  (zero)--(add1)--
2  (zero)--(add1)--(add1)--
3  (zero)--(add1)--(add1)--(add1)--
```

代表 0 的节点 (zero) 有一个接口，
代表 +1 的节点 (add1) 有两个接口，
将这些节点按照接口连接起来，就能编码自然数。

如何用图来表示作用于自然数的函数呢？

以加法为例，我们可以用一个有三个接口的节点表示加法。

```
       |
     (add)
     /   \
```

下面两个接口代表输入的「被加数」与「加数」，
上面一个接口代表输出的「得数」。

```
      得数
       |
     (add)
     /   \
 被加数  加数
```

比如 0 + 1 可以表示如下：

```
       |
     (add)
     /   \
(zero)   (add1)
           |
         (zero)
```

2 + 2 可以表示如下：

```
       |
     (add)
     /   \
(add1)   (add1)
  |        |
(add1)   (add1)
  |        |
(zero)   (zero)
```

通过定义 (add) 与相邻节点之间的反应方式，就可以完成加法的操作。

当 (add) 的「被加数」接口与 (zero) 相连时，
删除 (zero) 与 (add)，
并将 (add) 的「得数」接口与「加数」接口直接相连，
反应的规则如下：

```
       |               |
     (add)     =>      |
     /   \              \
(zero)
```

当 (add) 的「被加数」接口与 (add1) 相连时，
将 (add1) 转移到 (add) 上方，
反应的规则如下：

```
       |               |
     (add)     =>    (add1)
     /   \             |
(add1)               (add)
  |                  /   \
```

按照这两个规则，表示 2 + 2 的网，将通过如下的反应而得到 4：

```
       |                    |                     |                    |
     (add)                (add1)                (add1)               (add1)
     /   \                  |                     |                    |
(add1)   (add1)           (add)                 (add1)               (add1)
  |        |     =>       /   \       =>          |         =>         |
(add1)   (add1)      (add1)   (add1)            (add)                (add1)
  |        |           |        |               /   \                  |
(zero)   (zero)      (zero)   (add1)       (zero)   (add1)           (add1)
                                |                     |                |
                              (zero)                (add1)           (zero)
                                                      |
                                                    (zero)
```

TODO
