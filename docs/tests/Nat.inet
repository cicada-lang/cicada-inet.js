defnode zero -- value! end

defnode add1 prev -- value! end

defnode add target! addend -- return end

defrule zero add
  (add)-addend return-(add)
end

defrule add1 add
  (add1)-prev (add)-addend add add1
  return-(add)
end

defnet zero_zero_add
  zero zero add
end

defnet two
  zero add1
  zero add1
  add
end

defnet four
  two two add
end