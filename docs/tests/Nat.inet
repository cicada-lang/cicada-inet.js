defnode zero -- return! end

defnode add1 prev -- return! end

defnode add x! y -- return end

defrule zero add
  (add)-y return-(add)
end

defrule add1 add
  (add1)-prev (add)-y
  add add1
  return-(add)
end

defnet zero_zero_add
  zero zero add
end

defnet two
  zero add1
  zero add1
  add
end

defnet four
  two two add
end