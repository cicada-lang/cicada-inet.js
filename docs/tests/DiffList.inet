defnode sole
  ------
  value!
end

defnode null
  ------
  value!
end

defnode cons
  head
  tail
  -------
  value!
end

defnode diff
  front
  back
  ------
  value!
end

defnode diff_append
  target!
  rest
  ------
  return
end

defrule diff diff_append
  (diff)-back (diff_append)-rest diff_open
  (diff)-front diff
  return-(diff_append)
end

defnode diff_open
  target!
  list
  ------
  return
end

defrule diff diff_open
  (diff_open)-list (diff)-back connect
  (diff)-front
  return-(diff_open)
end

defnet one_two_soles
  wire sole cons diff
  wire sole cons sole cons diff
  diff_append
end

defnet two_two_soles
  wire sole cons sole cons diff
  wire sole cons sole cons diff
  diff_append
end

show one_two_soles end
run one_two_soles end

show two_two_soles end
run two_two_soles end
