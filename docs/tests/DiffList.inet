defnode sole -- value! end

defnode null -- value! end

defnode cons
  tail
  head
  -------
  value!
end

defnode diff
  left
  right
  ------
  value!
end

defnode diff_append
  rest
  target!
  ------
  return
end

defrule diff diff_append
  (diff)-left (diff_append)-rest diff_open
  (diff)-right diff
  return-(diff_append)
end

defnode diff_open
  list
  target!
  ------
  return
end

defrule diff diff_open
  (diff_open)-list (diff)-left connect
  (diff)-right
  return-(diff_open)
end

defnet one_two_soles
  wire sole cons diff
  wire sole cons sole cons diff
  diff_append
end

defnet two_two_soles
  wire sole cons sole cons diff
  wire sole cons sole cons diff
  diff_append
end

show one_two_soles end
run one_two_soles end

show two_two_soles end
run two_two_soles end
